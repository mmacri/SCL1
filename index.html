<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Training Home</title>
  <link rel="stylesheet" href="css/theme.css">
  <meta name="scl-api-base" content="">
  <script>
    (function() {
      const meta = document.querySelector('meta[name="scl-api-base"]');
      const metaValue = meta?.getAttribute('content')?.trim();
      if (metaValue) {
        window.SCL_API_BASE = metaValue;
      }
    })();
  </script>
  <style>
    body {
      background: linear-gradient(180deg, #f8fbff 0%, #eef2f7 100%);
      min-height: 100vh;
    }
    .header {
      box-shadow: var(--shadow);
    }
    .main-landing {
      max-width: 980px;
      margin: 48px auto;
      padding: 0 20px 48px;
      display: grid;
      gap: 20px;
    }
    .course-grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    .hero-intro {
      padding: 24px;
      border-radius: 18px;
      background: #0f172a;
      color: #e2e8f0;
      box-shadow: var(--shadow);
      text-align: center;
    }
    .hero-intro h1 {
      color: #fff;
      margin: 6px 0 10px;
    }
    .hero-intro .section-sub {
      color: #cbd5e1;
      margin: 0;
    }
    .path-grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    .path-card {
      border: 1px solid var(--border);
      border-radius: 14px;
      background: #fff;
      padding: 18px;
      display: grid;
      gap: 10px;
      box-shadow: var(--shadow);
    }
    .path-card.primary {
      background: linear-gradient(135deg, #0f52ba 0%, #1d4ed8 55%, #3652d9 100%);
      color: #fff;
      border-color: #0f52ba;
    }
    .path-card.primary h2,
    .path-card.primary p,
    .path-card.primary li {
      color: #fff;
    }
    .path-card h2 {
      margin: 0;
      color: #0b1f44;
    }
    .path-card p {
      margin: 0;
      color: var(--muted);
    }
    .path-card ul {
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
    }
    .path-card.primary ul {
      color: rgba(255,255,255,0.9);
    }
    .pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      background: #e7ecf5;
      color: #0b1f44;
      font-weight: 600;
    }
    .path-card.primary .pill {
      background: rgba(255,255,255,0.18);
      color: #fff;
    }
    .footer-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .landing-footer {
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      margin-top: 6px;
    }
  </style>
</head>
<body class="page">
  <header class="header">
    <div class="header-inner">
      <div class="brand"><img src="assets/logo.svg" alt="SCL logo">Training Home</div>
      <nav class="top-nav">
        <a href="process-deep-dive.html">Process deep dive</a>
        <a href="csir/my-learning.html">My learning</a>
        <a href="csir/curriculum.html">CSIR process</a>
      </nav>
    </div>
  </header>

  <main class="main-landing">
    <div class="hero-intro">
      <div class="pill">Seattle City Light â€¢ Training home</div>
      <h1 class="section-title">Available training</h1>
      <p class="section-sub">Select a course to open the process content or start your learning path.</p>
    </div>

    <div class="course-grid" id="courseGrid"></div>

    <div class="landing-footer">More courses will appear here as they are added.</div>
  </main>
  <script>
    (function() {
      const grid = document.getElementById('courseGrid');
      const apiBase = (window.SCL_API_BASE || localStorage.getItem('scl_api_base') || '').replace(/\/$/, '');
      const apiUrl = apiBase ? `${apiBase}/api/courses` : '/api/courses';
      const fallback = [{
        courseCode: 'CSIR-2025',
        courseName: 'Seattle City Light - OT Cyber Security Incident Response (CSIR) Training',
        versionLabel: '2025',
        isActive: true
      }];

      function renderCourses(list) {
        const courses = list && list.length ? list : fallback;
        grid.innerHTML = '';
        courses.forEach((course) => {
          const card = document.createElement('div');
          card.className = 'path-card primary';
          card.innerHTML = `
            <div class="pill">${course.versionLabel}</div>
            <h2>${course.courseName}</h2>
            <p class="section-sub">Open the CSIR process and start or resume your learning path.</p>
            <div class="footer-actions">
              <a class="button" href="csir/index.html">Open CSIR</a>
              <a class="button secondary" href="csir/my-learning.html">My learning</a>
              <a class="button ghost" href="process-deep-dive.html">Process deep dive</a>
            </div>
          `;
          grid.appendChild(card);
        });
      }

      fetch(apiUrl)
        .then((res) => res.ok ? res.json() : fallback)
        .then(renderCourses)
        .catch(() => renderCourses(fallback));
    })();
  </script>
</body>
</html>
